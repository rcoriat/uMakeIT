<app-encabezadoadmin></app-encabezadoadmin>
<tabset [justified]="true">
  <!-- Tab Platos -->
  <tab heading="Platos">
    <div class="contenido">
      <button class="btn btn-warning" (click)="agregarPlato.show()" (click)="reiniciarIncluidoNoIncluido()" style="display:block; margin-right:0; margin-left:auto"><i
          class="material-icons" style="vertical-align: middle; position: relative; text-align: center">add</i></button>
      <div id="tablaitems">
        <table class="table table-hover" id="tablaPlatos">
          <thead class="thead-dark">
            <tr>
              <th scope="col">#</th>
              <th scope="col">Imagen</th>
              <th scope="col">
                Tipo
                <i name="flecha-tipo-abajo" *ngIf="(sentidoscatplato[0] == 'desc') || ( (sentidoscatplato[0] == 'asc') && !ordenandocatplato[0])" class="material-icons" style="vertical-align: middle; position: relative; text-align: center" (click)="ordenarPorPlato('tipo', 0);">arrow_drop_down</i>
                <i name="flecha-tipo-arriba" *ngIf="(sentidoscatplato[0] == 'asc') && (ordenandocatplato[0])" class="material-icons" style="vertical-align: middle; position: relative; text-align: center" (click)="ordenarPorPlato('tipo', 0)">arrow_drop_up</i>
              </th>
              
              
              
              <th scope="col">Plato
                <i name="flecha-plato-abajo" *ngIf="(sentidoscatplato[1] == 'desc') || ( (sentidoscatplato[1] == 'asc') && !ordenandocatplato[1])" class="material-icons" style="vertical-align: middle; position: relative; text-align: center" (click)="ordenarPorPlato('nombre', 1);">arrow_drop_down</i>
                <i name="flecha-plato-arriba" *ngIf="(sentidoscatplato[1] == 'asc') && (ordenandocatplato[1])" class="material-icons" style="vertical-align: middle; position: relative; text-align: center" (click)="ordenarPorPlato('nombre', 1)">arrow_drop_up</i>
              </th>
              <th scope="col">Extras
                <i name="flecha-extras-abajo" *ngIf="(sentidoscatplato[2] == 'desc') || ( (sentidoscatplato[2] == 'asc') && !ordenandocatplato[2])" class="material-icons" style="vertical-align: middle; position: relative; text-align: center" (click)="ordenarPorPlato('personalizable', 2);">arrow_drop_down</i>
                <i name="flecha-extras-arriba" *ngIf="(sentidoscatplato[2] == 'asc') && (ordenandocatplato[2])" class="material-icons" style="vertical-align: middle; position: relative; text-align: center" (click)="ordenarPorPlato('personalizable', 2)">arrow_drop_up</i>
              </th>
              <th scope="col">Disponible
                <i name="flecha-disp-abajo" *ngIf="(sentidoscatplato[3] == 'desc') || ( (sentidoscatplato[3] == 'asc') && !ordenandocatplato[3])" class="material-icons" style="vertical-align: middle; position: relative; text-align: center" (click)="ordenarPorPlato('disponibilidad', 3);">arrow_drop_down</i>
                <i name="flecha-disp-arriba" *ngIf="(sentidoscatplato[3] == 'asc') && (ordenandocatplato[3])" class="material-icons" style="vertical-align: middle; position: relative; text-align: center" (click)="ordenarPorPlato('disponibilidad', 3)">arrow_drop_up</i>
              </th>
              <th scope="col">Precio (Bs.S)
                  <i name="flecha-prec-abajo" *ngIf="(sentidoscatplato[4] == 'desc') || ( (sentidoscatplato[4] == 'asc') && !ordenandocatplato[4])" class="material-icons" style="vertical-align: middle; position: relative; text-align: center" (click)="ordenarPorPlato('precio', 4);">arrow_drop_down</i>
                  <i name="flecha-prec-arriba" *ngIf="(sentidoscatplato[4] == 'asc') && (ordenandocatplato[4])" class="material-icons" style="vertical-align: middle; position: relative; text-align: center" (click)="ordenarPorPlato('precio', 4)">arrow_drop_up</i>
              </th>
              <th scope="col"></th>
              <th scope="col"></th>
            </tr>
          </thead>
          <tbody>
            <tr #forLoop *ngFor='let plato of platos; index as i' [style.background-color]="plato.disponibilidad ? '#7cd3ff' : '#f9b575'">

              <th scope="row">{{ i+1 }}</th>
              <th class="colimg"><img src="{{ plato.imagen }}" alt="imagendelplato"></th>
              <td *ngIf="plato.tipo == 'Entrada'"><i class="material-icons" style="vertical-align: middle; position: relative; text-align: center">local_dining</i></td>
              <td *ngIf="plato.tipo == 'Principal'"><i class="material-icons" style="vertical-align: middle; position: relative; text-align: center">fastfood</i></td>
              <td *ngIf="plato.tipo == 'Postre'"><i class="material-icons" style="vertical-align: middle; position: relative; text-align: center">cake</i></td>
              <td>{{ plato.nombre }}</td>
              <td>{{ plato.personalizable }}</td>
              <td>
                <div class="checkbox"><input type="checkbox" value="" [checked]="plato.disponibilidad" (click)="toggleDisponibilidadPlato($event, plato)"></div>
              </td>
              <td>{{ plato.precio }}</td>
              <td><button type="button" class="close" (click)="editaPlato.show(); editarPlato($event, plato);"><i class="material-icons"
                    style="vertical-align: middle; position: relative; text-align: center">edit</i></button></td>

              <!-- Modal editar -->

              <div bsModal #editaPlato="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name1"
                id="modalEditar" (onHidden)="reiniciarPlatos(); limpiarEPlato(); uploaded = false;" (onShown)="inicializarIncluidoNoIncluidoEdit()">
                <div *ngIf="eplato != null && eplato.id == plato.id">
                  <form class="modal-dialog modal-lg" name="formeditar" (ngSubmit)="formeditar.valid && actualizarPlato()"
                    #formeditar="ngForm" novalidate>
                    <div class="modal-content">
                      <div class="modal-header">
                        <h4 id="dialog-sizes-name1" class="modal-title pull-left">Editar Plato</h4>
                        <button type="button" class="close pull-right" (click)="editaPlato.hide()" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <div class="row align-items-start">
                          <div class="col">
                            <div class="foto">

                              <img style="margin-top: 25%; margin-bottom: 25%;" src="{{imagenURL | async}}" *ngIf="uploaded">
                              <img style="margin-top: 25%; margin-bottom: 25%;" src="{{plato.imagen}}" *ngIf="!uploaded">
                              <div class="custom-file">
                                <input type="file" class="custom-file-input" id="file" (change)="upload($event)" accept=".png">
                                <div>{{ porcentajeUpload | async }}</div>
                                <label class="custom-file-label" for="file">Subir imagen</label>
                              </div>

                            </div>
                          </div>
                          <div class="col">
                            <div class="descripcion">
                              <div class="form-group">
                                <label for="inputNombre">Nombre</label>
                                <input type="text" class="form-control" id="inputNombre" placeholder="Nombre" value="{{plato.nombre}}"
                                  [(ngModel)]="eplato.nombre" name="nombree" #nombree="ngModel" [ngClass]="{ 'is-invalid': formeditar.submitted && nombree.invalid }"
                                  required>
                                <div *ngIf="formeditar.submitted" class="invalid-feedback">
                                  <div *ngIf="nombree.errors != null && nombree.errors.required">El plato debe tener un
                                    nombre</div>
                                </div>
                              </div>
                              <div class="form-group">
                                <label for="inputDescripcion">Descripción</label>
                                <textarea type="text" rows="4" class="form-control" id="inputDescripcion" value="{{plato.descripcion}}"
                                  [(ngModel)]="eplato.descripcion" name="descripcione" #descripcione="ngModel"
                                  [ngClass]="{ 'is-invalid': formeditar.submitted && descripcione.invalid }" required></textarea>
                                <div *ngIf="formeditar.submitted" class="invalid-feedback">
                                  <div *ngIf="descripcione.errors != null && descripcione.errors.required">El plato
                                    debe tener una descripción</div>
                                </div>
                              </div>

                              <div class="form-group">
                                <label for="inputGroupSelect03">Tipo</label>
                                <select class="custom-select" id="inputGroupSelect03" name="selectipoe" [(ngModel)]="selectipoe.tipo"
                                  name="selectipoe" #selectipoe="ngModel" [ngClass]="{ 'is-invalid': formeditar.submitted && descripcione.invalid }"
                                  required>
                                  <option value="Entrada" [selected]="eplato.tipo == 'Entrada'">Entrada</option>
                                  <option value="Principal" [selected]="eplato.tipo == 'Principal'">Principal</option>
                                  <option value="Postre" [selected]="eplato.tipo == 'Postre'">Postre</option>
                                </select>
                                <div *ngIf="formeditar.submitted" class="invalid-feedback">
                                  <div *ngIf="selectipoe.errors != null && selectipoe.errors.required">El plato debe
                                    tener un tipo</div>
                                </div>
                              </div>

                              <button type="button" id="botonpers" class="btn btn-danger" (click)="togglePersonalizableEPlato($event);"
                                [style.background-color]="(eplato.personalizable == null)? '#fc7b7b' : (eplato.personalizable)? '#92f49e' : '#fc7b7b' ">
                                Personalizable
                              </button>
                              <accordion *ngIf="eplato.personalizable">
                                <accordion-group [isDisabled]="isFirstDisabled">
                                  <button type="button" class="btn btn-link btn-block clearfix" accordion-heading>
                                    <img src="https://firebasestorage.googleapis.com/v0/b/umakeitbd.appspot.com/o/extras.png?alt=media&token=9f4303be-99a0-493d-a672-8312d977771a"
                                      style="display: inline-block; width: 5%; border-radius: 100%">
                                    <div style="display: inline-block; width: 45%; text-align: left; padding-left: 3%">Agregar</div>
                                    <i class="material-icons" style="display: inline-block; width: 50%; text-align: right; vertical-align: middle;">arrow_drop_down</i>
                                  </button>
                                  <div class="descripcion">
                                    <div class="row">
                                      <div class="col-md" style="border: 2px solid black; border-radius: 5px; text-align: center;">
                                        <p style="border-bottom: 2px solid black">No incluidos</p>
                                        <bs-sortable [(ngModel)]="noIncluido" name="noincluye" itemClass="sortable-item"
                                          itemActiveClass="sortable-item-active" placeholderItem="No hay más extras para agregar"
                                          placeholderClass="placeholderStyle" wrapperClass="sortable-wrapper">
                                        </bs-sortable>

                                      </div>
                                      <div class="col-md" style="border: 2px solid black; border-radius: 5px; text-align: center;">
                                        <p style="border-bottom: 2px solid black">Incluidos</p>
                                        <bs-sortable [(ngModel)]="incluido" name="incluye" itemClass="sortable-item"
                                          itemActiveClass="sortable-item-active" placeholderItem="Arrastra aquí para agregar"
                                          placeholderClass="placeholderStyle" wrapperClass="sortable-wrapper"></bs-sortable>

                                      </div>
                                    </div>
                                  </div>
                                </accordion-group>
                              </accordion>
                              <div class="form-group">
                                <label for="inputPrecio">Precio (Bs.S)</label>
                                <input type="number" class="form-control bg-dark text-white" id="inputPrecio" style="display: inline-block; vertical-align: middle;"
                                  placeholder="Ingrese el precio en Bs.S" value="{{plato.precio}}" [(ngModel)]="eplato.precio"
                                  name="precioe" #precioe="ngModel" [ngClass]="{ 'is-invalid': formeditar.submitted && precioe.invalid }"
                                  required>
                                <div *ngIf="precioe.errors != null && precioe.errors.required">El plato debe tener un
                                  precio</div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-warning" style="vertical-align: middle; margin-right: auto; color:white;"
                          (click)="editaPlato.hide()">
                          Cerrar
                        </button>
                        <button type="button" class="btn btn-danger" (click)="confirmacionEdicion.show()"><i class="material-icons"
                            style="vertical-align: middle; position: relative; text-align: center">add</i>
                          Actualizar
                        </button>

                        <!-- Modal confirmar edicion -->
                        <div bsModal #confirmacionEdicion="bs-modal" class="modal fade" tabindex="-1" role="dialog"
                          aria-labelledby="dialog-sizes-name1">
                          <div class="modal-dialog modal-sm">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h4 id="dialog-sizes-name1" class="modal-title pull-left">Confirmación</h4>
                                <button type="button" class="close pull-right" (click)="confirmacionEdicion.hide()"
                                  aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                                </button>
                              </div>
                              <div class="modal-body">
                                <div class="row align-items-start">
                                  <div class="col">
                                    <div class="descripcion">
                                      <h5 style="display:inline-block; margin-right: 2%;">¿Desea realizar los cambios?</h5>
                                    </div>
                                    <div id="alerta">
                                      <i class="material-icons md-48">alert</i>
                                    </div>
                                  </div>
                                </div>
                              </div>

                              <div class="modal-footer">
                                <button type="button" class="btn btn-warning" style="vertical-align: middle; margin-right: auto; color:white;"
                                  (click)="confirmacionEdicion.hide();">
                                  Cancelar
                                </button>
                                <button type="submit" class="btn btn-danger" (click)=" confirmacionEdicion.hide(); ((formeditar.valid && editaPlato.hide()) && !(formeditar.valid && editaPlato.show())) || !((formeditar.valid && editaPlato.hide()) && (formeditar.valid && editaPlato.show()))"><i
                                    class="material-icons" style="vertical-align: middle; margin-right: 2%; margin-left: auto;">check</i>
                                  Confirmar
                                </button>
                              </div>
                            </div>
                          </div>
                        </div> <!-- Fin Modal confirmar edicion -->

                      </div>
                    </div>
                  </form>
                </div>
              </div> <!-- Fin Modal editar -->

              <td><button type="button" class="close" (click)="eliminarPlato.show()" aria-label="Close"><i class="material-icons"
                    style="vertical-align: middle; position: relative; text-align: center">close</i></button></td>
              <!-- Modal eliminar plato -->
              <div bsModal #eliminarPlato="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name1">
                <div class="modal-dialog" style="width:70%;">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h4 id="dialog-sizes-name1" class="modal-title pull-left">Eliminar Plato</h4>
                      <button type="button" class="close pull-right" (click)="eliminarPlato.hide()" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <div class="row align-items-start">
                        <div class="col">
                          <div class="descripcion">
                            <h5 style="display:inline-block; margin-right: 2%;">¿Desea eliminar el plato:
                              {{plato.nombre}}?</h5>
                          </div>
                          <div id="alerta">
                            <i class="material-icons md-48">alert</i>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="modal-footer">
                      <button type="button" class="btn btn-warning" style="vertical-align: middle; margin-right: auto; color:white;"
                        (click)="eliminarPlato.hide()">
                        Cancelar
                      </button>
                      <button type="button" class="btn btn-danger" (click)="confirmacion.show(); eliminarPlato.hide();"><i
                          class="material-icons" style="vertical-align: middle; margin-right: 2%; margin-left: auto;">check</i>
                        Confirmar
                      </button>

                    </div>
                  </div>
                </div>
              </div> <!-- Final modal eliminar plato -->


              <!-- Modal confirmacion eliminar -->
              <div bsModal #confirmacion="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name1">
                <div class="modal-dialog modal-sm">

                  <div class="modal-content">
                    <div class="modal-header">
                      <h4 id="dialog-sizes-name1" class="modal-title pull-left">Confirmación</h4>
                      <button type="button" class="close pull-right" (click)="confirmacion.hide()" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <div class="row align-items-start">
                        <div class="col">
                          <div class="descripcion">
                            <h5 style="display:inline-block; margin-right: 2%;">¿Desea realizar los cambios?</h5>
                          </div>
                          <div id="alerta">
                            <i class="material-icons md-48">alert</i>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="modal-footer">

                      <button type="button" class="btn btn-warning" style="vertical-align: middle; margin-right: auto; color:white;"
                        (click)="confirmacion.hide();">
                        Cancelar
                      </button>
                      <button type="submit" class="btn btn-danger" (click)="confirmacion.hide(); eliminarPlato.hide(); borrarPlato($event, plato)"><i
                          class="material-icons" style="vertical-align: middle; margin-right: 2%; margin-left: auto;">check</i>
                        Confirmar
                      </button>

                    </div>
                  </div>

                </div>
              </div><!-- Final modal confirmacion eliminar -->
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Modal agregar -->
    <div bsModal #agregarPlato="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name1"
      (onHidden)="uploaded=false;limpiarNPlato()">
      <div class="modal-dialog modal-lg">
        <form name="agregar" (ngSubmit)="formagregar.valid && addPlato();" #formagregar="ngForm" novalidate>
          <div class="modal-content">
            <div class="modal-header">
              <h4 id="dialog-sizes-name1" class="modal-title pull-left">Agregar al menú</h4>
              <button type="button" class="close pull-right" (click)="agregarPlato.hide();" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="row align-items-start">
                <div class="col">
                  <div class="foto">
                    <img style="margin-top: 25%; margin-bottom: 25%;" src="{{imagenURL | async}}" *ngIf="uploaded">
                    <img style="margin-top: 25%; margin-bottom: 25%;" src="https://firebasestorage.googleapis.com/v0/b/umakeitbd.appspot.com/o/plato2.png?alt=media&token=3b1e37ab-b454-47ad-af29-e030aa44ae85"
                      *ngIf="!uploaded">
                    <div class="custom-file">
                      <input type="file" class="custom-file-input" id="file" (change)="upload($event)" accept=".png"
                        lang="es">
                      <div>{{ porcentajeUpload | async }}</div>
                      <label class="custom-file-label" for="file">Subir imagen</label>
                    </div>
                  </div>
                </div>
                <div class="col">
                  <div class="descripcion">

                    <div class="form-group">
                      <label for="nombre">Nombre</label>
                      <input type="text" class="form-control" id="nombrep" name="nombrep" #nombrep="ngModel" [ngClass]="{ 'is-invalid': formagregar.submitted && nombrep.invalid }"
                        placeholder="Ingrese el nombre del plato" [(ngModel)]="nplato.nombre" required>
                      <div *ngIf="formagregar.submitted" class="invalid-feedback">
                        <div *ngIf="nombrep.errors != null && nombrep.errors.required">Ingrese el nombre del plato</div>
                      </div>

                    </div>
                    <div class="form-group">
                      <label for="descripcion">Descripción</label>
                      <textarea rows="4" class="form-control" id="descripcion" placeholder="Ingrese la descripción del plato"
                        [ngClass]="{ 'is-invalid': formagregar.submitted && descripcion.invalid }" name="descripcion"
                        #descripcion="ngModel" [(ngModel)]="nplato.descripcion" required></textarea>
                      <div *ngIf="formagregar.submitted" class="invalid-feedback">
                        <div *ngIf="descripcion.errors != null && descripcion.errors.required">Ingrese la descripción
                          del plato</div>
                      </div>
                    </div>

                    <div class="form-group">
                      <label for="inputGroupSelect02">Tipo</label>
                      <select class="custom-select" id="inputGroupSelect02" name="selectipo" [(ngModel)]="nplato.tipo"
                        #selectipo="ngModel" [ngClass]="{ 'is-invalid': formagregar.submitted && selectipo.invalid }"
                        required>
                        <option></option>
                        <option value="Entrada">Entrada</option>
                        <option value="Principal">Principal</option>
                        <option value="Postre">Postre</option>
                      </select>
                      <div *ngIf="formagregar.submitted" class="invalid-feedback">
                        <div *ngIf="selectipo.errors != null && selectipo.errors.required">Ingrese el tipo del plato</div>
                      </div>
                    </div>

                    <button type="button" id="botonpers" class="btn btn-danger" (click)="togglePersonalizableNPlato($event);"
                      [style.background-color]="(nplato.personalizable == null)? '#fc7b7b' : (nplato.personalizable)? '#92f49e' : '#fc7b7b' ">
                      Personalizable
                    </button>
                    <accordion *ngIf="nplato.personalizable">
                      <accordion-group [isDisabled]="isFirstDisabled">
                        <button type="button" class="btn btn-link btn-block clearfix" accordion-heading>
                          <img src="https://firebasestorage.googleapis.com/v0/b/umakeitbd.appspot.com/o/extras.png?alt=media&token=9f4303be-99a0-493d-a672-8312d977771a"
                            style="display: inline-block; width: 5%; border-radius: 100%">
                          <div style="display: inline-block; width: 45%; text-align: left; padding-left: 3%">Extras</div>
                          <i class="material-icons" style="display: inline-block; width: 50%; text-align: right; vertical-align: middle;">arrow_drop_down</i>
                        </button>
                        <div class="descripcion">
                          <div class="row">
                            <div class="col-md" style="border: 2px solid black; border-radius: 5px; text-align: center;">
                              <p style="border-bottom: 2px solid black">No incluidos</p>
                              <bs-sortable [(ngModel)]="noIncluido" name="noincluye" itemClass="sortable-item"
                                itemActiveClass="sortable-item-active" placeholderItem="No hay más extras para agregar"
                                placeholderClass="placeholderStyle" wrapperClass="sortable-wrapper">
                              </bs-sortable>

                            </div>
                            <div class="col-md" style="border: 2px solid black; border-radius: 5px; text-align: center;">
                              <p style="border-bottom: 2px solid black">Incluidos</p>
                              <bs-sortable [(ngModel)]="incluido" name="incluye" itemClass="sortable-item"
                                itemActiveClass="sortable-item-active" placeholderItem="Arrastra aquí para agregar"
                                placeholderClass="placeholderStyle" wrapperClass="sortable-wrapper"></bs-sortable>

                            </div>
                          </div>
                        </div>
                      </accordion-group>
                    </accordion>
                    <div class="form-group">
                      <label for="precio">Precio</label>
                      <input type="number" class="form-control bg-dark text-white" name="precio" placeholder="Ingrese el precio en Bs.S"
                        style="display: inline-block; margin-bottom: 2%; vertical-align: middle;" [(ngModel)]="nplato.precio"
                        #precio="ngModel" [ngClass]="{ 'is-invalid': formagregar.submitted && precio.invalid }"
                        required>
                      <div *ngIf="formagregar.submitted" class="invalid-feedback">
                        <div *ngIf="precio.errors != null && precio.errors.required">Ingrese el precio del plato</div>
                      </div>
                    </div>

                  </div>
                </div>
              </div>
            </div>

            <div class="modal-footer">

              <button type="button" class="btn btn-warning" style="vertical-align: middle; margin-left: 0; margin-right:auto; color:white;"
                (click)="agregarPlato.hide()">
                Cerrar
              </button>

              <button (click)="((formagregar.valid && agregarPlato.hide()) && !(formagregar.valid && agregarPlato.show())) || !((formagregar.valid && agregarPlato.hide()) && (formagregar.valid && agregarPlato.show()))"
                type="submit" class="btn btn-danger"><i class="material-icons" style="vertical-align: middle; position:relative; margin-left: auto; margin-right:0; text-align: center">add</i>
                Agregar plato
              </button>

            </div>

          </div>
        </form>
      </div>
    </div>
  </tab><!-- Fin Tab Platos -->

  <!-- Tab Extras -->
  <tab heading="Extras">
    <div class="contenido">
      <button class="btn btn-warning" (click)="agregarExtra.show()" (click)="limpiarNExtra()" style="display:block; margin-right:0; margin-left:auto"
        (onHidden)="uploaded=false;"><i class="material-icons" style="vertical-align: middle; position: relative; text-align: center">add</i></button>
      <div id="tablaitems">
        <table class="table table-hover" id="tablaExtras">
          <thead class="thead-dark">
            <tr>
              <th scope="col">#<i class="material-icons" style="vertical-align: middle; position: relative; text-align: center">arrow_drop_down</i></th>
              <th scope="col">Imagen</th>
              <th scope="col">Extra
                <i *ngIf="(sentidoscatextra[0] == 'desc') || ( (sentidoscatextra[0] == 'asc') && !ordenandocatextra[0])" class="material-icons" style="vertical-align: middle; position: relative; text-align: center" (click)="ordenarExtras('nombre', 0);">arrow_drop_down</i>
                <i *ngIf="(sentidoscatextra[0] == 'asc') && (ordenandocatextra[0])" class="material-icons" style="vertical-align: middle; position: relative; text-align: center" (click)="ordenarExtras('nombre', 0)">arrow_drop_up</i>
              </th>
              <th scope="col">Disponible
                <i *ngIf="(sentidoscatextra[1] == 'desc') || ( (sentidoscatextra[1] == 'asc') && !ordenandocatextra[1])" class="material-icons" style="vertical-align: middle; position: relative; text-align: center" (click)="ordenarExtras('disponible', 1);">arrow_drop_down</i>
                <i *ngIf="(sentidoscatextra[1] == 'asc') && (ordenandocatextra[1])" class="material-icons" style="vertical-align: middle; position: relative; text-align: center" (click)="ordenarExtras('disponible', 1)">arrow_drop_up</i>
              </th>
              <th scope="col">Precio (Bs.S)
                <i *ngIf="(sentidoscatextra[2] == 'desc') || ( (sentidoscatextra[2] == 'asc') && !ordenandocatextra[2])" class="material-icons" style="vertical-align: middle; position: relative; text-align: center" (click)="ordenarExtras('precio', 2);">arrow_drop_down</i>
                <i *ngIf="(sentidoscatextra[2] == 'asc') && (ordenandocatextra[2])" class="material-icons" style="vertical-align: middle; position: relative; text-align: center" (click)="ordenarExtras('precio', 2)">arrow_drop_up</i>
              </th>
              <th scope="col"></th>
              <th scope="col"></th>
            </tr>
          </thead>
          <tbody>
            <tr #forLoop *ngFor='let extra of extras; index as i' [style.background-color]="extra.disponible ? '#7cd3ff' : '#f9b575'">
              <th scope="row">{{ i+1 }}</th>
              <th class="colimg"><img src="{{ extra.imagen }}" alt="imagendelextra"></th>
              <td>{{ extra.nombre }}</td>
              <td>
                <div class="checkbox"><input type="checkbox" value="" [checked]="extra.disponible" (click)="toggleDisponibilidadExtra($event, extra)"></div>
              </td>
              <td>{{ extra.precio }}</td>
              <td><button type="button" class="close" (click)="editaExtra.show(); editarExtra($event, extra);"><i class="material-icons"
                    style="vertical-align: middle; position: relative; text-align: center">edit</i></button></td>

              <!-- Modal editar extra -->

              <div bsModal #editaExtra="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name1"
                id="modalEditar" (onHidden)="reiniciarExtras(); uploaded = false;">
                <div *ngIf="eextra != null && eextra.id == extra.id">
                  <form class="modal-dialog modal-lg" name="formeditextra" (ngSubmit)="formeditextra.valid && actualizarExtra()" #formeditextra="ngForm" novalidate>
                    <div class="modal-content">
                      <div class="modal-header">
                        <h4 id="dialog-sizes-name1" class="modal-title pull-left">Editar Extra</h4>
                        <button type="button" class="close pull-right" (click)="editaExtra.hide()" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <div class="row align-items-start">
                          <div class="col">
                            <div class="foto">

                              <img style="margin-top: 25%; margin-bottom: 25%;" src="{{imagenURL | async}}" *ngIf="uploaded">
                              <img style="margin-top: 25%; margin-bottom: 25%;" src="{{extra.imagen}}" *ngIf="!uploaded">
                              <div class="custom-file">
                                <input type="file" class="custom-file-input" id="file" (change)="upload($event)" accept=".png">
                                <div>{{ porcentajeUpload | async }}</div>
                                <label class="custom-file-label" for="file">Subir imagen</label>
                              </div>

                            </div>
                          </div>
                          <div class="col">
                            <div class="descripcion">
                              <div class="form-group">
                                <label for="inputNombre">Nombre</label>
                                <input type="text" class="form-control" id="inputNombre" placeholder="Nombre" value="{{extra.nombre}}"
                                  [(ngModel)]="eextra.nombre" name="nombreeEx" #nombreeEx="ngModel" 
                                  [ngClass]= "{ 'is-invalid': formeditextra.submitted && nombreeEx.invalid }" required>
                                  <div *ngIf="formeditextra.submitted" class="invalid-feedback">
                                      <div *ngIf="nombreeEx.errors != null && nombreeEx.errors.required">El extra debe tener un nombre</div>
                              </div>

                              <div class="form-group">
                                <label for="inputPrecio">Precio (Bs.S)</label>
                                <input type="number" class="form-control bg-dark text-white" id="inputPrecio" style="display: inline-block; vertical-align: middle;"
                                  placeholder="Ingrese el precio en Bs.S" value="{{extra.precio}}" [(ngModel)]="eextra.precio"
                                  name="precioeEx" #precioeEx="ngModel" [ngClass]="{ 'is-invalid': formeditextra.submitted && precioeEx.invalid }" required>
                                  <div *ngIf="formeditextra.submitted" class="invalid-feedback">
                                      <div *ngIf="precioeEx.errors != null && precioeEx.errors.required">El extra debe tener un precio</div>
                                  </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-warning" style="vertical-align: middle; margin-right: auto; color:white;"
                          (click)="editaExtra.hide()">
                          Cerrar
                        </button>
                        <button type="button" class="btn btn-danger" (click)="confirmacionEdicion.show()"><i class="material-icons"
                            style="vertical-align: middle; position: relative; text-align: center">add</i>
                          Actualizar
                        </button>

                        <!-- Modal confirmar edicion extra -->
                        <div bsModal #confirmacionEdicion="bs-modal" class="modal fade" tabindex="-1" role="dialog"
                          aria-labelledby="dialog-sizes-name1">
                          <div class="modal-dialog modal-sm">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h4 id="dialog-sizes-name1" class="modal-title pull-left">Confirmación</h4>
                                <button type="button" class="close pull-right" (click)="confirmacionEdicion.hide()"
                                  aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                                </button>
                              </div>
                              <div class="modal-body">
                                <div class="row align-items-start">
                                  <div class="col">
                                    <div class="descripcion">
                                      <h5 style="display:inline-block; margin-right: 2%;">¿Desea realizar los cambios?</h5>
                                    </div>
                                    <div id="alerta">
                                      <i class="material-icons md-48">alert</i>
                                    </div>
                                  </div>
                                </div>
                              </div>

                              <div class="modal-footer">
                                <button type="button" class="btn btn-warning" style="vertical-align: middle; margin-right: auto; color:white;"
                                  (click)="confirmacionEdicion.hide();">
                                  Cancelar
                                </button>
                                <button type="submit" class="btn btn-danger" (click)="confirmacionEdicion.hide();((formeditextra.valid && editaExtra.hide()) && !(formeditextra.valid && editaExtra.show())) || !((formeditextra.valid && editaExtra.hide()) && (formeditextra.valid && editaExtra.show()))"><i
                                    class="material-icons" style="vertical-align: middle; margin-right: 2%; margin-left: auto;">check</i>
                                  Confirmar
                                </button>
                              </div>
                            </div>
                          </div>
                        </div> <!-- Fin Modal confirmar edicion extra -->

                      </div>
                    
                  </div>
                  </form> 
                </div>
              </div> <!-- Fin Modal editar extra -->

              <td><button type="button" class="close" (click)="eliminarExtra.show()" aria-label="Close"><i class="material-icons"
                    style="vertical-align: middle; position: relative; text-align: center">close</i></button></td>
              <!-- Modal eliminar extra -->
              <div bsModal #eliminarExtra="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name1">
                <div class="modal-dialog" style="width:70%;">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h4 id="dialog-sizes-name1" class="modal-title pull-left">Eliminar Extra</h4>
                      <button type="button" class="close pull-right" (click)="eliminarExtra.hide()" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <div class="row align-items-start">
                        <div class="col">
                          <div class="descripcion">
                            <h5 style="display:inline-block; margin-right: 2%;">¿Desea eliminar el extra:
                              {{extra.nombre}}?</h5>
                          </div>
                          <div id="alerta">
                            <i class="material-icons md-48">alert</i>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="modal-footer">
                      <button type="button" class="btn btn-warning" style="vertical-align: middle; margin-right: auto; color:white;"
                        (click)="eliminarExtra.hide()">
                        Cancelar
                      </button>
                      <button type="button" class="btn btn-danger" (click)="confirmacion.show(); eliminarExtra.hide();"><i
                          class="material-icons" style="vertical-align: middle; margin-right: 2%; margin-left: auto;">check</i>
                        Confirmar
                      </button>

                    </div>
                  </div>
                </div>
              </div> <!-- Final modal eliminar extra -->


              <!-- Modal confirmacion eliminar -->
              <div bsModal #confirmacion="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name1">
                <div class="modal-dialog modal-sm">

                  <div class="modal-content">
                    <div class="modal-header">
                      <h4 id="dialog-sizes-name1" class="modal-title pull-left">Confirmación</h4>
                      <button type="button" class="close pull-right" (click)="confirmacion.hide()" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <div class="row align-items-start">
                        <div class="col">
                          <div class="descripcion">
                            <h5 style="display:inline-block; margin-right: 2%;">¿Desea realizar los cambios?</h5>
                          </div>
                          <div id="alerta">
                            <i class="material-icons md-48">alert</i>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="modal-footer">

                      <button type="button" class="btn btn-warning" style="vertical-align: middle; margin-right: auto; color:white;"
                        (click)="confirmacion.hide();">
                        Cancelar
                      </button>
                      <button type="submit" class="btn btn-danger" (click)="confirmacion.hide(); eliminarExtra.hide(); borrarExtra($event, extra)"><i
                          class="material-icons" style="vertical-align: middle; margin-right: 2%; margin-left: auto;">check</i>
                        Confirmar
                      </button>

                    </div>
                  </div>

                </div>
              </div><!-- Final modal confirmacion eliminar -->
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Modal agregar -->
    <div bsModal #agregarExtra="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name1"
      (onHidden)="uploaded=false;">
      <div class="modal-dialog modal-lg">
        <form name="agregar" (ngSubmit)="formagregarExtra.valid && addExtra();" #formagregarExtra="ngForm" novalidate>
          <div class="modal-content">
            <div class="modal-header">
              <h4 id="dialog-sizes-name1" class="modal-title pull-left">Agregar al menú</h4>
              <button type="button" class="close pull-right" (click)="agregarExtra.hide();" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="row align-items-start">
                <div class="col">
                  <div class="foto">
                    <img style="margin-top: 25%; margin-bottom: 25%;" src="{{imagenURL | async}}" *ngIf="uploaded">
                    <img style="margin-top: 25%; margin-bottom: 25%;" src="https://firebasestorage.googleapis.com/v0/b/umakeitbd.appspot.com/o/extras.png?alt=media&token=9f4303be-99a0-493d-a672-8312d977771a"
                      *ngIf="!uploaded">
                    <div class="custom-file">
                      <input type="file" class="custom-file-input" id="file" (change)="upload($event)" accept=".png"
                        lang="es">
                      <div>{{ porcentajeUpload | async }}</div>
                      <label class="custom-file-label" for="file">Subir imagen</label>
                    </div>
                  </div>
                </div>
                <div class="col">
                  <div class="descripcion">

                    <div class="form-group">
                      <label for="nombre">Nombre</label>
                      <input type="text" class="form-control" id="nombre" name="nombreEx" #nombreEx="ngModel" [ngClass]="{ 'is-invalid': formagregarExtra.submitted && nombreEx.invalid }"
                        placeholder="Ingrese el nombre del extra" [(ngModel)]="nextra.nombre" required>
                      <div *ngIf="formagregarExtra.submitted" class="invalid-feedback">
                        <div *ngIf="nombreEx.errors != null && nombreEx.errors.required">Ingrese el nombre del extra</div>
                      </div>
                    </div>

                    <div class="form-group">
                      <label for="precio">Precio</label>
                      <input type="number" class="form-control bg-dark text-white" name="precioEx" placeholder="Ingrese el precio en Bs.S"
                        #precioEx="ngModel" [ngClass]="{ 'is-invalid': formagregarExtra.submitted && precioEx.invalid }"
                        style="display: inline-block; margin-bottom: 2%; vertical-align: middle;" [(ngModel)]="nextra.precio" required>
                      <div *ngIf="formagregarExtra.submitted" class="invalid-feedback"></div>
                        <div *ngIf="precioEx.errors != null && precioEx.errors.required">Ingrese el nombre del extra</div>
                      </div>

                    </div>

                  </div>
                </div>
              </div>
            

            <div class="modal-footer">

                <button type="button" class="btn btn-warning" style="vertical-align: middle; margin-left: 0; margin-right:auto; color:white;"
                  (click)="agregarExtra.hide()">
                  Cerrar
                </button>
          
                <button (click)="((formagregarExtra.valid && agregarExtra.hide()) && !(formagregarExtra.valid && agregarExtra.show())) || !((formagregarExtra.valid && agregarExtra.hide()) && (formagregarExtra.valid && agregarExtra.show()))"
                  type="submit" class="btn btn-danger"><i class="material-icons" style="vertical-align: middle; position:relative; margin-left: auto; margin-right:0; text-align: center">add</i>
                  Agregar extra
                </button>
          
            </div>
          </div>
        </form> <!--Aqui?-->
      </div>
    </div>
    

    

    
  </tab><!-- Fin Tab Extras -->


<i class="fa fa-chevron-up" *ngIf="sortDirection === 'asc'" ></i>
<i class="fa fa-chevron-down" *ngIf="sortDirection === 'desc'"></i>
<ng-content></ng-content>