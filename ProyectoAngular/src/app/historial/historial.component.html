<app-encabezado></app-encabezado>
<accordion id="contenido">
  <h3>Historial de Pedidos</h3>
  <accordion class="pedido" *ngFor="let pedido of historial">
    <h3 style="display: inline-block; width: 50%; text-align: left;">Pedido #{{pedido.numorden}}</h3>
    <h5 style="display: inline-block; width: 50%; text-align: right; vertical-align: top;">{{pedido.fecha.toDateString()}}</h5>
    <accordion>
      <accordion-group style="text-align: center;">
        <button class="btn btn-link btn-block clearfix" accordion-heading>
          <div style="display: inline-block; width: 50%; text-align: left">Platos</div>
          <i class="material-icons" style="display: inline-block; width: 50%; text-align: right; vertical-align: middle;">arrow_drop_down</i>
        </button>
        <ul *ngFor="let plato of pedido.platos" style="display: inline-block; width: 33%; margin-bottom:2%; padding: 2px" class="list-group">
          <li class="list-group-item"><img src="{{plato.imagen}}" style="width: 60%; margin:0 auto;"></li>
          <li class="list-group-item active">{{plato.nombre}} ({{plato.cantidad}})</li>
          <li class="list-group-item">Bs.S {{plato.precio}}</li>
          <ul *ngFor="let extra of plato.extras" style="font-size:1vw;">
              <li class="list-group-item">+ {{traerExtra(extra).nombre}}</li> 
          </ul> 
        </ul> 

        <table class="table table-striped table-dark" style="width: 100%; text-align:center;">
          <tbody>
            <tr>
              <td style="font-weight:bold;">Subtotal</td>
              <td>Bs.S {{pedido.subtotal}}</td>
            </tr>
            <tr>
              <td style="font-weight:bold;">IVA</td>
              <td>Bs.S {{pedido.ivatotal}}</td>
            </tr>
            <tr>
              <td style="font-weight:bold;">Total</td>
              <td>Bs.S {{pedido.preciototal}}</td>
            </tr>
          </tbody>
        </table> 
      </accordion-group>  
    </accordion>
    <button type="submit" class="btn btn-danger" style="width: 100%;" (click)="repetirPedido(pedido); confirmacion.show();">Repetir orden</button>
  </accordion>

  <div style="display: flexbox; justify-content: center; position: relative; margin-bottom: 3%;">
    <a [routerLink]="['/menu']"><button type="submit" class="btn btn-dark">Regresar</button></a>
  </div>
</accordion>

<div bsModal #confirmacion="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name1">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <h4 id="dialog-sizes-name1" class="modal-title pull-left">Confirmación</h4>
          <button type="button" class="close pull-right" (click)="confirmacion.hide()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="row align-items-start">
            <div class="col">
              <div class="descripcion">
                <h5 style="display:inline-block; margin-right: 2%;">Se ha agregado el pedido al carrito.</h5>
                <label>¿Qué desea hacer?</label>
              </div>
              <div id="alerta">
                <i class="material-icons md-48">alert</i>
              </div>
            </div>
          </div>
        </div>
  
        <div class="modal-footer">
  
          <button type="button" class="btn btn-warning" style="vertical-align: middle; margin-right: auto; color:white;"
            (click)="confirmacion.hide();">
            Volver al historial
          </button>
          <a [routerLink]="['/carrito']" routerLinkActive="router-link-active"><button type="submit" class="btn btn-danger" (click)="confirmacion.hide();">
            <i class="material-icons" style="vertical-align: middle; margin-right: 2%; margin-left: auto;">shopping_cart</i>
            Ir al carrito
          </button></a>
  
        </div>
      </div>
  
    </div>
  </div>

<app-piedepagina></app-piedepagina>